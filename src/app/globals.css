@tailwind base;
@tailwind components;
@tailwind utilities;

/* Light/Dark theme tokens (aligned with Tailwind theme colors) */
:root {
  color-scheme: light dark;
  --background: 0 0% 100%;
  --foreground: 222.2 84% 4.9%;
  --muted: 210 40% 96.1%;
  --muted-foreground: 215.4 16.3% 46.9%;
  --popover: 0 0% 100%;
  --popover-foreground: 222.2 84% 4.9%;
  --card: 0 0% 100%;
  --card-foreground: 222.2 84% 4.9%;
  --border: 214.3 31.8% 91.4%;
  --input: 214.3 31.8% 91.4%;
  --primary: 351 75% 48%; /* matches primary-500 */
  --primary-foreground: 0 0% 100%;
  --secondary: 210 40% 96.1%;
  --secondary-foreground: 222.2 47.4% 11.2%;
  --accent: 210 40% 96.1%;
  --accent-foreground: 222.2 47.4% 11.2%;
  --destructive: 0 84.2% 60.2%;
  --destructive-foreground: 0 0% 98%;
  --ring: 222.2 84% 4.9%;
  --radius: 0.5rem;
}

@media (prefers-color-scheme: dark) {
  :root {
    --background: 222.2 84% 4.9%;
    --foreground: 210 40% 98%;
    --muted: 217.2 32.6% 17.5%;
    --muted-foreground: 215 20.2% 65.1%;
    --popover: 222.2 84% 4.9%;
    --popover-foreground: 210 40% 98%;
    --card: 222.2 84% 4.9%;
    --card-foreground: 210 40% 98%;
    --border: 217.2 32.6% 17.5%;
    --input: 217.2 32.6% 17.5%;
    --primary: 351 75% 48%;
    --primary-foreground: 0 0% 100%;
    --secondary: 217.2 32.6% 17.5%;
    --secondary-foreground: 210 40% 98%;
    --accent: 217.2 32.6% 17.5%;
    --accent-foreground: 210 40% 98%;
    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 0 0% 98%;
    --ring: 212.7 26.8% 83.9%;
  }
}

@layer base {
  * {
    border-color: hsl(var(--border));
  }
  body {
    color: hsl(var(--foreground));
    background-color: hsl(var(--background));
    font-family: var(--font-inter), "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }
  /* Ensure text is visible by default */
  body, html {
    color: #111827 !important; /* text-gray-900 */
  }
  /* Ensure all text elements have visible colors */
  p, h1, h2, h3, h4, h5, h6, span, div, a, li, td, th, label, input, textarea, select {
    color: inherit;
  }
  /* Override for light backgrounds */
  .bg-white, .bg-gray-50, .bg-gray-100 {
    color: #111827 !important; /* text-gray-900 */
  }
  /* Ensure main content areas have visible text */
  main, .main-content {
    color: #111827 !important;
  }
}

/* Leaflet map styles */
.leaflet-container {
  width: 100%;
  height: 100%;
}

/* Ensure form field text is visible app-wide */
input,
select,
textarea {
  color: inherit;
}

input::placeholder,
textarea::placeholder {
  color: hsl(var(--muted-foreground));
}

/* Force text visibility for all content areas - comprehensive fix */
div:not(.bg-green-800):not(.bg-blue-800):not(.bg-red-600):not(.bg-green-600):not(.bg-blue-600):not([class*="bg-red"]):not([class*="bg-green"]):not([class*="bg-blue"]):not([class*="bg-yellow"]):not([class*="bg-orange"]):not([class*="bg-purple"]):not([class*="bg-pink"]) {
  color: #111827;
}

/* Ensure cards and containers have visible text */
.bg-white,
.bg-gray-50,
.bg-gray-100 {
  color: #111827 !important;
}

/* Force dark text on light backgrounds unless explicitly styled */
.bg-white *,
.bg-gray-50 *,
.bg-gray-100 * {
  color: #111827;
}

/* Preserve colored text classes */
.text-white,
.text-blue-600,
.text-green-600,
.text-red-600,
.text-yellow-600,
.text-orange-600,
.text-purple-600,
.text-pink-600,
.text-blue-500,
.text-green-500,
.text-red-500,
.text-yellow-500,
.text-orange-500,
.text-purple-500,
.text-pink-500,
.text-blue-700,
.text-green-700,
.text-red-700,
.text-gray-500,
.text-gray-600,
.text-gray-700,
.text-gray-800,
.text-gray-900,
.text-black {
  color: inherit !important;
}

/* Ensure tables have visible text */
table,
table td,
table th {
  color: #111827 !important;
}

table td *,
table th * {
  color: #111827 !important;
}

/* Ensure buttons maintain their text colors */
button.text-white,
a.text-white,
.text-white {
  color: #ffffff !important;
}

/* Ensure all text in main content is visible */
main *,
main div *,
main p *,
main span *,
main h1 *,
main h2 *,
main h3 *,
main h4 *,
main h5 *,
main h6 * {
  color: inherit;
}

/* Override for light background containers */
.bg-white *:not(.text-white):not([class*="text-blue"]):not([class*="text-green"]):not([class*="text-red"]):not([class*="text-yellow"]):not([class*="text-orange"]):not([class*="text-purple"]):not([class*="text-pink"]):not([class*="text-gray"]):not([class*="text-black"]) {
  color: #111827 !important;
}

.bg-gray-50 *:not(.text-white):not([class*="text-blue"]):not([class*="text-green"]):not([class*="text-red"]):not([class*="text-yellow"]):not([class*="text-orange"]):not([class*="text-purple"]):not([class*="text-pink"]):not([class*="text-gray"]):not([class*="text-black"]) {
  color: #111827 !important;
}

.bg-gray-100 *:not(.text-white):not([class*="text-blue"]):not([class*="text-green"]):not([class*="text-red"]):not([class*="text-yellow"]):not([class*="text-orange"]):not([class*="text-purple"]):not([class*="text-pink"]):not([class*="text-gray"]):not([class*="text-black"]) {
  color: #111827 !important;
}
